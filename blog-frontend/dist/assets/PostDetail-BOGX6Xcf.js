/* empty css             *//* empty css                *//* empty css                  *//* empty css               */import{d as Y,v as $,I as H,x as L,Q as p,q as P,f as r,l as v,a as t,b as s,w as l,X as A,Y as R,t as i,j,g as c,U as q,V as z,Z as F,r as S,e as d,W as G,F as Q,z as U,c as W,C as X,$ as Z,a0 as J,a1 as K,G as O,D as ee,s as n,_ as te}from"./index-BXzsnj2W.js";import{p as se}from"./posts-Yph_4swi.js";const ae={class:"post-detail"},oe={key:0,class:"post-cover"},le=["src"],ne={key:0,class:"loading"},re={key:1,class:"post-content"},ie={class:"post-header"},ue={class:"post-title"},ce={class:"post-meta"},de={class:"meta-item"},_e={class:"meta-item"},ve={key:0,class:"meta-item"},pe={key:1,class:"meta-item"},me={key:0,class:"post-tags"},fe={class:"post-main"},ge={key:0,class:"post-excerpt"},he=["innerHTML"],ke={class:"post-footer"},ye={class:"post-actions"},we={class:"post-info"},Ce={key:2,class:"error-state"},xe=Y({__name:"PostDetail",setup($e){const b=H(),h=P(),e=$(null),m=$(!1),f=Number(b.params.id),D=async()=>{m.value=!0;try{const a=await se.getById(f);console.log("文章详情接口返回：",a),e.value=a.data,e.value&&e.value.tags&&(e.value.tags=e.value.tags.map(o=>o.tag)),e.value&&(document.title=`${e.value.title} - 博客系统`),console.log("赋值后的 post.value：",e.value)}catch(a){console.error("获取文章详情失败:",a,a==null?void 0:a.response),p.error("文章加载失败")}finally{m.value=!1}},k=a=>O(a).format("YYYY年MM月DD日 HH:mm"),E=a=>{h.push(`/tags?id=${a.id}`)},I=()=>{navigator.share&&e.value?navigator.share({title:e.value.title,text:e.value.excerpt||e.value.title,url:window.location.href}).catch(()=>{y()}):y()},y=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{p.success("链接已复制到剪贴板")}).catch(()=>{p.error("复制失败")})};return L(()=>{if(!f||isNaN(f)){p.error("无效的文章ID"),h.push("/");return}D()}),(a,o)=>{var w;const N=R,u=j,B=S("router-link"),M=ee,g=X,T=K,V=A;return n(),r("div",ae,[(w=e.value)!=null&&w.coverImage?(n(),r("div",oe,[s("img",{src:e.value.coverImage,alt:"cover"},null,8,le)])):v("",!0),t(V,{class:"post-card"},{default:l(()=>{var C,x;return[m.value?(n(),r("div",ne,[t(N,{rows:5,animated:""})])):e.value?(n(),r("div",re,[s("header",ie,[s("h1",ue,i(e.value.title),1),s("div",ce,[s("div",de,[t(u,null,{default:l(()=>[t(c(q))]),_:1}),s("span",null,i(((C=e.value.author)==null?void 0:C.nickname)||((x=e.value.author)==null?void 0:x.username)||"匿名"),1)]),s("div",_e,[t(u,null,{default:l(()=>[t(c(z))]),_:1}),s("span",null,i(k(e.value.createdAt)),1)]),e.value.category?(n(),r("div",ve,[t(u,null,{default:l(()=>[t(c(F))]),_:1}),t(B,{to:`/categories?id=${e.value.category.id}`,class:"category-link"},{default:l(()=>[d(i(e.value.category.name),1)]),_:1},8,["to"])])):v("",!0),e.value.viewCount?(n(),r("div",pe,[t(u,null,{default:l(()=>[t(c(G))]),_:1}),s("span",null,i(e.value.viewCount)+" 次阅读",1)])):v("",!0)]),e.value.tags&&e.value.tags.length?(n(),r("div",me,[(n(!0),r(Q,null,U(e.value.tags,_=>(n(),W(M,{key:_.id,size:"small",class:"tag-item",onClick:be=>E(_)},{default:l(()=>[d(i(_.name),1)]),_:2},1032,["onClick"]))),128))])):v("",!0)]),s("main",fe,[e.value.excerpt?(n(),r("div",ge,[s("blockquote",null,i(e.value.excerpt),1)])):v("",!0),s("div",{class:"post-body",innerHTML:e.value.content},null,8,he)]),s("footer",ke,[s("div",ye,[t(g,{onClick:o[0]||(o[0]=_=>a.$router.go(-1))},{default:l(()=>[t(u,null,{default:l(()=>[t(c(Z))]),_:1}),o[2]||(o[2]=d(" 返回 "))]),_:1,__:[2]}),t(g,{onClick:I,type:"primary"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(J))]),_:1}),o[3]||(o[3]=d(" 分享 "))]),_:1,__:[3]})]),s("div",we,[s("p",null,[o[4]||(o[4]=s("strong",null,"最后更新：",-1)),d(i(k(e.value.updatedAt)),1)])])])])):(n(),r("div",Ce,[t(T,{icon:"warning",title:"文章不存在","sub-title":"您访问的文章可能已被删除或不存在"},{extra:l(()=>[t(g,{type:"primary",onClick:o[1]||(o[1]=_=>a.$router.push("/"))},{default:l(()=>o[5]||(o[5]=[d("返回首页")])),_:1,__:[5]})]),_:1})]))]}),_:1})])}}}),Te=te(xe,[["__scopeId","data-v-0a8b3568"]]);export{Te as default};
